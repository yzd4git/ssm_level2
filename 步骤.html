<html>
<head>
  <title>Evernote Export</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/302292 (zh-CN); Windows/6.1.7601 Service Pack 1 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="919"/>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>作者：</b></td><td><i>yzd_java@126.com</i></td></tr>
</table>
</div>
<br/>

<div>
<span><div>SSM框架：ssm_level2 :</div><div><br/></div><div>    <span style="font-size: 19px;"> 1.1新建Maven工程：</span></div><div>     </div><div>     <span style="font-size: 19px;">1.2修改 pom.xml</span></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>&lt; project xmlns= &quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi= &quot;http://www.w3.org/2001/XMLSchema-instance&quot;</div><div>  xsi:schemaLocation= &quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;</div><div>  &lt; modelVersion &gt;4.0.0 &lt;/modelVersion &gt;</div><div>  &lt; groupId&gt; 2016.07.27&lt;/ groupId&gt;</div><div>  &lt; artifactId&gt; ssm_level2&lt;/ artifactId&gt;</div><div>  &lt; packaging&gt; war&lt;/ packaging&gt;</div><div>  &lt; version&gt; 0.0.1-SNAPSHOT&lt;/ version&gt;</div><div>  &lt; name&gt; ssm_level2 Maven Webapp&lt;/ name&gt;</div><div>  &lt; url&gt; http://maven.apache.org&lt;/ url&gt;</div><div>       &lt;properties &gt;</div><div>             &lt;!-- spring版本号 --&gt;</div><div>             &lt;spring.version &gt;4.0.2.RELEASE &lt;/spring.version &gt;</div><div>             &lt;!-- mybatis 版本号 --&gt;</div><div>             &lt;mybatis.version &gt;3.2.6 &lt;/mybatis.version &gt;</div><div>             &lt;!-- log4j日志文件管理包版本 --&gt;</div><div>             &lt;slf4j.version &gt;1.7.7 &lt;/slf4j.version &gt;</div><div>             &lt;log4j.version &gt;1.2.17 &lt;/log4j.version &gt;</div><div>       &lt;/properties &gt;</div><div><br/></div><div>    &lt;dependencies &gt;</div><div>        &lt;dependency &gt;</div><div>            &lt;groupId &gt; junit&lt;/ groupId&gt;</div><div>            &lt;artifactId &gt; junit&lt;/ artifactId&gt;</div><div>            &lt;version &gt;3.8.1 &lt;/version &gt;</div><div>             &lt;!-- 表示开发的时候引入，发布的时候不会加载此包 --&gt;<br/><br/></div><div>            &lt;scope &gt;test &lt;/scope &gt;</div><div>        &lt;/dependency &gt;</div><div>        &lt;!-- &lt;dependency&gt;</div><div>            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;</div><div>            &lt;artifactId&gt;javax.servlet- api&lt;/artifactId&gt;</div><div>            &lt;version&gt;3.1.0&lt;/version&gt;</div><div>        &lt;/dependency&gt; --&gt;</div><div><br/></div><div>         &lt;!-- spring核心包 --&gt;<br/><br/></div><div>        &lt;dependency &gt;<br/></div><div>            &lt;groupId &gt;org.springframework &lt;/groupId &gt;<br/></div><div>            &lt;artifactId &gt;spring-core &lt;/artifactId &gt;<br/></div><div>            &lt;version &gt;${spring.version} &lt;/version &gt;<br/></div><div>        &lt;/dependency &gt;<br/></div><div><br/></div><div>        &lt;dependency &gt;<br/></div><div>            &lt;groupId &gt;org.springframework &lt;/groupId &gt;<br/></div><div>            &lt;artifactId &gt;spring-web &lt;/artifactId &gt;<br/></div><div>            &lt;version &gt;${spring.version} &lt;/version &gt;<br/></div><div>        &lt;/dependency &gt;<br/></div><div>        &lt;dependency &gt;<br/></div><div>            &lt;groupId &gt;org.springframework &lt;/groupId &gt;<br/></div><div>            &lt;artifactId &gt;spring- oxm&lt;/ artifactId&gt;<br/><br/></div><div>            &lt;version &gt;${spring.version} &lt;/version &gt;<br/></div><div>        &lt;/dependency &gt;<br/></div><div>        &lt;dependency &gt;<br/></div><div>            &lt;groupId &gt;org.springframework &lt;/groupId &gt;<br/></div><div>            &lt;artifactId &gt;spring- tx&lt;/ artifactId&gt;<br/><br/></div><div>            &lt;version &gt;${spring.version} &lt;/version &gt;<br/></div><div>        &lt;/dependency &gt;<br/></div><div><br/></div><div>        &lt;dependency &gt;<br/></div><div>            &lt;groupId &gt;org.springframework &lt;/groupId &gt;<br/></div><div>            &lt;artifactId &gt;spring- jdbc&lt;/ artifactId&gt;<br/><br/></div><div>            &lt;version &gt;${spring.version} &lt;/version &gt;<br/></div><div>        &lt;/dependency &gt;<br/></div><div><br/></div><div>        &lt;dependency &gt;<br/></div><div>            &lt;groupId &gt;org.springframework &lt;/groupId &gt;<br/></div><div>            &lt;artifactId &gt;spring- webmvc&lt;/ artifactId&gt;<br/><br/></div><div>            &lt;version &gt;${spring.version} &lt;/version &gt;<br/></div><div>        &lt;/dependency &gt;<br/></div><div>        &lt;dependency &gt;<br/></div><div>            &lt;groupId &gt;org.springframework &lt;/groupId &gt;<br/></div><div>            &lt;artifactId &gt;spring- aop&lt;/ artifactId&gt;<br/><br/></div><div>            &lt;version &gt;${spring.version} &lt;/version &gt;<br/></div><div>        &lt;/dependency &gt;<br/></div><div><br/></div><div>        &lt;dependency &gt;<br/></div><div>            &lt;groupId &gt;org.springframework &lt;/groupId &gt;<br/></div><div>            &lt;artifactId &gt;spring-context-support &lt;/artifactId &gt;<br/></div><div>            &lt;version &gt;${spring.version} &lt;/version &gt;<br/></div><div>        &lt;/dependency &gt;<br/></div><div><br/></div><div>        &lt;dependency &gt;<br/></div><div>            &lt;groupId &gt;org.springframework &lt;/groupId &gt;<br/></div><div>            &lt;artifactId &gt;spring-test &lt;/artifactId &gt;<br/></div><div>            &lt;version &gt;${spring.version} &lt;/version &gt;<br/></div><div>        &lt;/dependency &gt;<br/></div><div>        &lt;!-- mybatis核心包 --&gt;<br/><br/></div><div>        &lt;dependency &gt;<br/></div><div>            &lt;groupId &gt;org.mybatis &lt;/groupId &gt;<br/></div><div>            &lt;artifactId &gt; mybatis&lt;/ artifactId&gt;<br/><br/></div><div>            &lt;version &gt;${mybatis.version} &lt;/version &gt;<br/></div><div>        &lt;/dependency &gt;<br/></div><div>         &lt;!-- mybatis /spring包 --&gt;<br/></div><div>        &lt;dependency &gt;<br/></div><div>            &lt;groupId &gt;org.mybatis &lt;/groupId &gt;<br/></div><div>            &lt;artifactId &gt; mybatis-spring&lt;/ artifactId&gt;<br/><br/></div><div>            &lt;version &gt;1.2.2 &lt;/version &gt;<br/></div><div>        &lt;/dependency &gt;<br/></div><div><br/></div><div>         &lt;!-- 导入java ee jar 包 --&gt;<br/></div><div>        &lt;dependency &gt;<br/></div><div>            &lt;groupId &gt; javax&lt;/ groupId&gt;<br/><br/></div><div>            &lt;artifactId &gt; javaee-api &lt;/artifactId &gt;<br/></div><div>            &lt;version &gt;7.0 &lt;/version &gt;<br/></div><div>        &lt;/dependency &gt;<br/></div><div><br/></div><div>         &lt;!-- 导入Mysql 数据库链接jar包 --&gt;<br/></div><div>        &lt;dependency &gt;<br/></div><div>            &lt;groupId &gt; mysql&lt;/ groupId&gt;<br/><br/></div><div>            &lt;artifactId &gt; mysql-connector-java&lt;/ artifactId&gt;<br/><br/></div><div>            &lt;version &gt;5.1.36 &lt;/version &gt;<br/></div><div>        &lt;/dependency &gt;<br/></div><div>        &lt;!-- 导入dbcp的jar包，用来在applicationContext.xml中配置数据库 --&gt;<br/></div><div>        &lt;dependency &gt;<br/></div><div>            &lt;groupId &gt;commons- dbcp&lt;/ groupId&gt;<br/><br/></div><div>            &lt;artifactId &gt;commons- dbcp&lt;/ artifactId&gt;<br/><br/></div><div>            &lt;version &gt;1.2.2 &lt;/version &gt;<br/></div><div>        &lt;/dependency &gt;<br/></div><div><br/></div><div>        &lt;!-- JSTL标签类 --&gt;<br/></div><div>        &lt;dependency &gt;<br/></div><div>            &lt;groupId &gt; jstl&lt;/ groupId&gt;<br/><br/></div><div>            &lt;artifactId &gt; jstl&lt;/ artifactId&gt;<br/><br/></div><div>            &lt;version &gt;1.2 &lt;/version &gt;<br/></div><div>        &lt;/dependency &gt;<br/></div><div>        &lt;!-- 日志文件管理包 --&gt;<br/><br/></div><div>        &lt;!-- log start --&gt;<br/></div><div>        &lt;dependency &gt;<br/></div><div>            &lt;groupId &gt;log4j &lt;/groupId &gt;<br/></div><div>            &lt;artifactId &gt;log4j &lt;/artifactId &gt;<br/></div><div>            &lt;version &gt;${log4j.version} &lt;/version &gt;<br/></div><div>        &lt;/dependency &gt;<br/></div><div><br/></div><div><br/></div><div>        &lt;!-- 格式化对象，方便输出日志 --&gt;<br/><br/></div><div>        &lt;dependency &gt;<br/></div><div>            &lt;groupId &gt;com.alibaba &lt;/groupId &gt;<br/></div><div>            &lt;artifactId &gt; fastjson&lt;/ artifactId&gt;<br/><br/></div><div>            &lt;version &gt;1.1.41 &lt;/version &gt;<br/></div><div>        &lt;/dependency &gt;<br/></div><div><br/></div><div><br/></div><div>        &lt;dependency &gt;<br/></div><div>            &lt;groupId &gt;org.slf4j &lt;/groupId &gt;<br/></div><div>            &lt;artifactId &gt;slf4j- api&lt;/ artifactId&gt;<br/><br/></div><div>            &lt;version &gt;${slf4j.version} &lt;/version &gt;<br/></div><div>        &lt;/dependency &gt;<br/></div><div><br/></div><div>        &lt;dependency &gt;<br/></div><div>            &lt;groupId &gt;org.slf4j &lt;/groupId &gt;<br/></div><div>            &lt;artifactId &gt;slf4j-log4j12 &lt;/artifactId &gt;<br/></div><div>            &lt;version &gt;${slf4j.version} &lt;/version &gt;<br/></div><div>        &lt;/dependency &gt;<br/></div><div>        &lt;!-- log end --&gt;<br/></div><div>        &lt;!-- 映入JSON --&gt;<br/></div><div>        &lt;dependency &gt;<br/></div><div>            &lt;groupId &gt;org.codehaus.jackson &lt;/groupId &gt;<br/></div><div>            &lt;artifactId &gt; jackson-mapper- asl&lt;/ artifactId&gt;<br/><br/></div><div>            &lt;version &gt;1.9.13 &lt;/version &gt;<br/></div><div>        &lt;/dependency &gt;<br/></div><div>        &lt;!-- 上传组件包 --&gt;<br/></div><div>        &lt;dependency &gt;<br/></div><div>            &lt;groupId &gt;commons- fileupload&lt;/ groupId&gt;<br/><br/></div><div>            &lt;artifactId &gt;commons- fileupload&lt;/ artifactId&gt;<br/><br/></div><div>            &lt;version &gt;1.3.1 &lt;/version &gt;<br/></div><div>        &lt;/dependency &gt;<br/></div><div>        &lt;dependency &gt;<br/></div><div>            &lt;groupId &gt;commons- io&lt;/ groupId&gt;<br/><br/></div><div>            &lt;artifactId &gt;commons- io&lt;/ artifactId&gt;<br/><br/></div><div>            &lt;version &gt;2.4 &lt;/version &gt;<br/></div><div>        &lt;/dependency &gt;<br/></div><div>        &lt;dependency &gt;<br/></div><div>            &lt;groupId &gt;commons- codec&lt;/ groupId&gt;<br/><br/></div><div>            &lt;artifactId &gt;commons- codec&lt;/ artifactId&gt;<br/><br/></div><div>            &lt;version &gt;1.9 &lt;/version &gt;<br/></div><div>        &lt;/dependency &gt;<br/></div><div><br/></div><div>    &lt;/dependencies &gt;</div><div>&lt; build&gt;</div><div>             &lt;finalName &gt; ssm&lt;/ finalName&gt;</div><div>             &lt;plugins &gt;</div><div>                   &lt;plugin &gt;</div><div>                         &lt;groupId &gt;org.apache.maven.plugins &lt;/groupId &gt;</div><div>                         &lt;artifactId &gt; maven-war-plugin &lt;/artifactId &gt;</div><div>                         &lt;version &gt;2.1-alpha-1 &lt;/version &gt;</div><div>                         &lt;configuration &gt;</div><div>                               &lt;webappDirectory &gt;${basedir}/src/main/webapp &lt;/webappDirectory &gt;</div><div>                               &lt;!-- &lt;warSourceDirectory&gt;${basedir}/ src/main/webapp&lt;/warSourceDirectory&gt; --&gt;</div><div>                         &lt;/configuration &gt;</div><div>                   &lt;/plugin &gt;</div><div>             &lt;/plugins &gt;</div><div>       &lt;/build &gt;</div><div>&lt;/ project&gt;</div></div><div><br/></div><div><span style="font-size: 19px;">1.3.1整合SpringMVC 。配置 spring-mvc.xml</span></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>&lt;? xml version= &quot;1.0&quot; encoding= &quot;UTF-8&quot; ?&gt;<br/></div><div>&lt; beans xmlns= &quot;http://www.springframework.org/schema/beans&quot;<br/><br/></div><div>    xmlns:xsi= &quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:p= &quot;http://www.springframework.org/schema/p&quot;<br/><br/></div><div>    xmlns:context= &quot;http://www.springframework.org/schema/context&quot;<br/><br/></div><div>    xmlns:mvc= &quot;http://www.springframework.org/schema/mvc&quot;<br/><br/></div><div>    xsi:schemaLocation= &quot;http://www.springframework.org/schema/beans</div><div>    http://www.springframework.org/schema/beans/spring-beans.xsd</div><div>    http://www.springframework.org/schema/context</div><div>    http://www.springframework.org/schema/context/spring-context.xsd</div><div>    http://www.springframework.org/schema/mvc</div><div>    http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd&quot; &gt;</div><div>    &lt;!-- 自动扫描该包，使SpringMVC认为包下用了@controller注解的类是控制器 --&gt;<br/><br/></div><div>    &lt;context:component-scan base-package = &quot;com.javen.controller&quot; /&gt;<br/></div><div>    &lt;!-- 扩充了注解驱动，可以将请求参数绑定到控制器参数 --&gt;</div><div>    &lt;mvc:annotation-driven /&gt;</div><div>    &lt;!-- 静态资源处理  css js imgs --&gt;</div><div>    &lt;mvc:resources location = &quot;/resources/**&quot; mapping= &quot;/resources&quot;/&gt;</div><div><br/></div><div>    &lt;!--避免IE执行AJAX时，返回JSON出现下载文件 --&gt;<br/><br/></div><div>    &lt;bean id = &quot;mappingJacksonHttpMessageConverter&quot;<br/></div><div>        class= &quot;org.springframework.http.converter.json.MappingJacksonHttpMessageConverter&quot; &gt;<br/></div><div>        &lt;property name = &quot;supportedMediaTypes&quot;&gt;<br/><br/></div><div>            &lt;list &gt;<br/></div><div>                &lt;value &gt;text/html;charset=UTF-8 &lt;/value &gt;<br/></div><div>            &lt;/list &gt;<br/></div><div>        &lt;/property &gt;<br/></div><div>    &lt;/bean &gt;<br/></div><div>    &lt;!-- 启动SpringMVC的注解功能，完成请求和注解POJO的映射 --&gt;<br/><br/></div><div>    &lt;bean<br/><br/></div><div>        class= &quot;org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter&quot; &gt;<br/></div><div>        &lt;property name = &quot;messageConverters&quot;&gt;<br/><br/></div><div>            &lt;list &gt;<br/></div><div>                &lt;ref bean = &quot;mappingJacksonHttpMessageConverter&quot; /&gt; &lt;!-- JSON转换器 --&gt;<br/></div><div>            &lt;/list &gt;<br/></div><div>        &lt;/property &gt;<br/></div><div>    &lt;/bean &gt;<br/></div><div><br/></div><div>    &lt;!-- 配置文件上传，如果没有使用文件上传可以不用配置，当然如果不配，那么配置文件中也不必引入上传组件包 --&gt;<br/></div><div>    &lt;bean id = &quot;multipartResolver&quot;<br/></div><div>        class= &quot;org.springframework.web.multipart.commons.CommonsMultipartResolver&quot; &gt;<br/></div><div>        &lt;!-- 默认编码 --&gt;<br/></div><div>        &lt;property name = &quot;defaultEncoding&quot; value= &quot;utf-8&quot; /&gt;<br/><br/></div><div>        &lt;!-- 文件大小最大值 --&gt;<br/><br/></div><div>        &lt;property name = &quot;maxUploadSize&quot; value= &quot;10485760000&quot; /&gt;<br/></div><div>        &lt;!-- 内存中的最大值 --&gt;<br/><br/></div><div>        &lt;property name = &quot;maxInMemorySize&quot; value= &quot;40960&quot; /&gt;<br/><br/></div><div>        &lt;!-- 启用是为了推迟文件解析，以便捕获文件大小异常 --&gt;</div><div>        &lt;property name = &quot;resolveLazily&quot; value= &quot;true&quot;/&gt;</div><div>    &lt;/bean &gt;<br/></div><div><br/></div><div>    &lt;!-- 配置ViewResolver 。可用多个ViewResolver 。使用order属性排序。   InternalResourceViewResolver 放在最后--&gt;</div><div>    &lt;bean class= &quot;org.springframework.web.servlet.view.ContentNegotiatingViewResolver&quot; &gt;</div><div>    &lt;property name = &quot;order&quot; value= &quot;1&quot;&gt;&lt;/ property&gt;</div><div>        &lt;property name = &quot;mediaTypes&quot;&gt;</div><div>            &lt;map &gt;</div><div>                &lt;!-- 告诉视图解析器，返回的类型为json格式 --&gt;</div><div>                &lt;entry key = &quot;json&quot; value= &quot;application/json&quot; /&gt;</div><div>                &lt;entry key = &quot;xml&quot; value= &quot;application/xml&quot; /&gt;</div><div>                &lt;entry key = &quot;htm&quot; value= &quot;text/htm&quot; /&gt;</div><div>            &lt;/map &gt;</div><div>        &lt;/property &gt;</div><div>        &lt;property name = &quot;defaultViews&quot;&gt;</div><div>            &lt;list &gt;</div><div>                &lt;!-- ModelAndView里的数据变成JSON --&gt;</div><div>                &lt;bean class= &quot;org.springframework.web.servlet.view.json.MappingJacksonJsonView&quot; /&gt;</div><div>            &lt;/list &gt;</div><div>        &lt;/property &gt;</div><div>        &lt;property name = &quot;ignoreAcceptHeader&quot; value= &quot;true&quot; &gt;&lt;/property &gt;</div><div>    &lt;/bean &gt;</div><div><br/></div><div>   &lt;!-- 定义跳转的文件的前后缀 ，视图模式配置--&gt;<br/><br/></div><div>    &lt;bean class= &quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot; &gt;<br/></div><div>        &lt;!-- 这里的配置我的理解是自动给后面action的方法return的字符串加上前缀和后缀，变成一个 可用的url地址 --&gt;<br/></div><div>        &lt;property name = &quot;prefix&quot; value= &quot;/WEB-INF/jsp/&quot; /&gt;<br/></div><div>        &lt;property name = &quot;suffix&quot; value= &quot;.jsp&quot; /&gt;<br/></div><div>    &lt;/bean &gt;<br/></div><div>&lt;/ beans&gt;</div></div><div><br/></div><div><span style="font-size: 19px;">1.3.2配置web.xml文件</span></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>&lt;? xml version= &quot;1.0&quot; encoding= &quot;UTF-8&quot; ?&gt;</div><div>&lt; web-app xmlns:xsi= &quot;http://www.w3.org/2001/XMLSchema-instance&quot;</div><div>       xmlns= &quot;http://java.sun.com/xml/ns/javaee&quot;</div><div>       xsi:schemaLocation= &quot;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd&quot;</div><div>       version= &quot;3.0&quot; &gt;</div><div>       &lt;display-name &gt;Archetype Created Web Application &lt;/display-name &gt;</div><div>       &lt;!-- Spring和mybatis的配置文件 --&gt;</div><div>       &lt;context-param &gt;</div><div>             &lt;param-name &gt;contextConfigLocation &lt;/param-name &gt;</div><div>             &lt;param-value &gt;classpath:spring-mybatis.xml &lt;/param-value &gt;</div><div>       &lt;/context-param &gt;</div><div>       &lt;!-- 编码过滤器 --&gt;</div><div>       &lt;filter &gt;</div><div>             &lt;filter-name &gt;encodingFilter &lt;/filter-name &gt;</div><div>             &lt;filter-class &gt;org.springframework.web.filter.CharacterEncodingFilter &lt;/filter-class &gt;</div><div>             &lt;async-supported &gt;true &lt;/async-supported &gt;</div><div>             &lt;init-param &gt;</div><div>                   &lt;param-name &gt;encoding &lt;/param-name &gt;</div><div>                   &lt;param-value &gt;UTF-8 &lt;/param-value &gt;</div><div>             &lt;/init-param &gt;</div><div>       &lt;/filter &gt;</div><div>       &lt;filter-mapping &gt;</div><div>             &lt;filter-name &gt;encodingFilter &lt;/filter-name &gt;</div><div>             &lt;url-pattern &gt;/* &lt;/url-pattern &gt;</div><div>       &lt;/filter-mapping &gt;</div><div>       &lt;!-- Spring监听器 --&gt;</div><div>       &lt;listener &gt;</div><div>             &lt;listener-class &gt;org.springframework.web.context.ContextLoaderListener &lt;/listener-class &gt;</div><div>       &lt;/listener &gt;</div><div>       &lt;!-- 防止Spring内存溢出监听器 --&gt;</div><div>       &lt;listener &gt;</div><div>             &lt;listener-class &gt;org.springframework.web.util.IntrospectorCleanupListener &lt;/listener-class &gt;</div><div>       &lt;/listener &gt;</div><div><br/></div><div>       &lt;!-- Spring MVC servlet --&gt;</div><div>       &lt;servlet &gt;</div><div>             &lt;servlet-name &gt;SpringMVC &lt;/servlet-name &gt;</div><div>             &lt;servlet-class &gt;org.springframework.web.servlet.DispatcherServlet &lt;/servlet-class &gt;</div><div>             &lt;init-param &gt;</div><div>                   &lt;param-name &gt;contextConfigLocation &lt;/param-name &gt;</div><div>                   &lt;param-value &gt;classpath:spring-mvc.xml &lt;/param-value &gt;</div><div>             &lt;/init-param &gt;</div><div>             &lt;load-on-startup &gt;1 &lt;/load-on-startup &gt;</div><div>             &lt;async-supported &gt;true &lt;/async-supported &gt;</div><div>       &lt;/servlet &gt;</div><div>       &lt;servlet-mapping &gt;</div><div>             &lt;servlet-name &gt;SpringMVC &lt;/servlet-name &gt;</div><div>             &lt;!-- 此处可以可以配置成*.do，对应struts的后缀习惯 --&gt;</div><div>             &lt;url-pattern &gt;/ &lt;/url-pattern &gt;</div><div>       &lt;/servlet-mapping &gt;</div><div>       &lt;welcome-file-list &gt;</div><div>             &lt;welcome-file &gt;/index.jsp &lt;/welcome-file &gt;</div><div>       &lt;/welcome-file-list &gt;</div><div><br/></div><div>&lt;/ web-app&gt;</div></div><div><br/></div><div><span style="font-size: 19px;">1.4 log4j配置</span></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>log4j.rootLogger= INFO,Console,File<br/></div><div>#定义日志输出目的地为控制台</div><div>log4j.appender.Console= org.apache.log4j.ConsoleAppender<br/></div><div>log4j.appender.Console.Target= System.out<br/></div><div>#可以灵活地指定日志输出格式，下面一行是指定具体的格式</div><div>log4j.appender.Console.layout = org.apache.log4j.PatternLayout<br/></div><div>log4j.appender.Console.layout.ConversionPattern= [%c] - %m%n<br/></div><div><br/></div><div>#文件大小到达指定尺寸的时候产生一个新的文件</div><div>log4j.appender.File = org.apache.log4j.RollingFileAppender<br/></div><div>#指定输出目录</div><div>log4j.appender.File.File = logs/ssm.log<br/></div><div>#定义文件最大大小</div><div>log4j.appender.File.MaxFileSize = 10MB<br/></div><div># 输出所以日志，如果换成DEBUG表示输出DEBUG以上级别日志</div><div>log4j.appender.File.Threshold = ALL<br/></div><div>log4j.appender.File.layout = org.apache.log4j.PatternLayout<br/></div><div>log4j.appender.File.layout.ConversionPattern = [%p] [%d{yyyy-MM- dd HH\:mm \:ss}][%c]%m%n</div></div><div><br/></div><div><span style="font-size: 19px;">1.5 Spring与 MyBatis整合</span></div><div>     请注意1.3.2中的文件中的注释：Spring和mybatis的配置文件</div><div><br/></div><div><span style="font-size: 19px;">1.5.1 建立JDBC属性文件（注意将文件编码修改为utf-8）</span></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>driver=com.mysql.jdbc.Driver</div><div>url=jdbc:mysql://127.0.0.1:3306/ssm?useUnicode=true&amp;amp;characterEncoding=UTF8</div><div>username= </div><div>password= </div><div>#定义初始连接数</div><div>initialSize= 0<br/></div><div>#定义最大连接数</div><div>maxActive= 20<br/></div><div>#定义最大空闲</div><div>maxIdle=20<br/><br/></div><div>#定义最小空闲</div><div>minIdle=1<br/><br/></div><div>#定义最长等待时间</div><div>maxWait=60000</div></div><div><br/></div><div><span style="font-size: 19px;">1.5.2 建立spring-mybatis.xml配置文件</span></div><div>          这个文件就是用来完成spring和mybatis的整合的。这里面也没多少行配置，主要的就是自动扫描，自动注入，配置数据库。注释也很详细，大家看看就明白了。</div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>&lt;? xml version= &quot;1.0&quot; encoding= &quot;UTF-8&quot; ?&gt;<br/></div><div>&lt; beans xmlns= &quot;http://www.springframework.org/schema/beans&quot;<br/><br/></div><div>    xmlns:xsi= &quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:p= &quot;http://www.springframework.org/schema/p&quot;<br/><br/></div><div>    xmlns:context= &quot;http://www.springframework.org/schema/context&quot;<br/><br/></div><div>    xmlns:mvc= &quot;http://www.springframework.org/schema/mvc&quot;<br/><br/></div><div>    xsi:schemaLocation= &quot;http://www.springframework.org/schema/beans</div><div>                        http://www.springframework.org/schema/beans/spring-beans-3.1.xsd</div><div>                        http://www.springframework.org/schema/context</div><div>                        http://www.springframework.org/schema/context/spring-context-3.1.xsd</div><div>                        http://www.springframework.org/schema/mvc</div><div>                        http://www.springframework.org/schema/mvc/spring-mvc-4.0.xsd&quot;&gt;<br/><br/></div><div>    &lt;!-- 自动扫描 --&gt;<br/></div><div>    &lt;context:component-scan base-package = &quot;com.javen&quot; /&gt;<br/></div><div><br/></div><div>    &lt;!-- 引入配置文件 --&gt;<br/></div><div>    &lt;bean id = &quot;propertyConfigurer&quot;<br/></div><div>        class= &quot;org.springframework.beans.factory.config.PropertyPlaceholderConfigurer&quot; &gt;<br/></div><div>        &lt;property name = &quot;location&quot; value= &quot;classpath:jdbc.properties&quot; /&gt;<br/></div><div>    &lt;/bean &gt;<br/></div><div><br/></div><div>    &lt;bean id = &quot;dataSource&quot; class= &quot;org.apache.commons.dbcp.BasicDataSource&quot;<br/><br/></div><div>        destroy-method= &quot;close&quot; &gt;<br/></div><div>        &lt;property name = &quot;driverClassName&quot; value= &quot;${driver}&quot; /&gt;<br/><br/></div><div>        &lt;property name = &quot;url&quot; value= &quot;${url}&quot; /&gt;<br/></div><div>        &lt;property name = &quot;username&quot; value= &quot;${username}&quot; /&gt;<br/></div><div>        &lt;property name = &quot;password&quot; value= &quot;${password}&quot; /&gt;<br/></div><div>        &lt;!-- 初始化连接大小 --&gt;<br/><br/></div><div>        &lt;property name = &quot;initialSize&quot; value= &quot;${initialSize}&quot;&gt;&lt;/ property&gt;<br/><br/></div><div>        &lt;!-- 连接池最大数量 --&gt;<br/><br/></div><div>        &lt;property name = &quot;maxActive&quot; value= &quot;${maxActive}&quot;&gt;&lt;/ property&gt;<br/><br/></div><div>        &lt;!-- 连接池最大空闲 --&gt;<br/><br/></div><div>        &lt;property name = &quot;maxIdle&quot; value= &quot;${maxIdle}&quot;&gt;&lt;/ property&gt;<br/><br/></div><div>        &lt;!-- 连接池最小空闲 --&gt;<br/><br/></div><div>        &lt;property name = &quot;minIdle&quot; value= &quot;${minIdle}&quot;&gt;&lt;/ property&gt;<br/><br/></div><div>        &lt;!-- 获取连接最大等待时间 --&gt;<br/><br/></div><div>        &lt;property name = &quot;maxWait&quot; value= &quot;${maxWait}&quot;&gt;&lt;/ property&gt;<br/><br/></div><div>    &lt;/bean &gt;<br/></div><div><br/></div><div>    &lt;!-- spring和MyBatis完美整合，不需要mybatis的配置映射文件 --&gt;<br/><br/></div><div>    &lt;bean id = &quot;sqlSessionFactory&quot; class= &quot;org.mybatis.spring.SqlSessionFactoryBean&quot; &gt;<br/></div><div>        &lt;property name = &quot;dataSource&quot; ref= &quot;dataSource&quot; /&gt;<br/></div><div>        &lt;!-- 自动扫描mapping.xml文件 --&gt;<br/><br/></div><div>        &lt;property name = &quot;mapperLocations&quot; value= &quot;classpath:com/javen/mapping/*.xml&quot; &gt;&lt;/property &gt;<br/></div><div>    &lt;/bean &gt;<br/></div><div><br/></div><div>    &lt;!-- DAO接口所在包名，Spring会自动查找其下的类 --&gt;<br/><br/></div><div>    &lt;bean class = &quot;org.mybatis.spring.mapper.MapperScannerConfigurer&quot;&gt;<br/><br/></div><div>        &lt;property name = &quot;basePackage&quot; value= &quot;com.javen.dao&quot; /&gt;<br/></div><div>        &lt;property name = &quot;sqlSessionFactoryBeanName&quot; value= &quot;sqlSessionFactory&quot; &gt;&lt;/property &gt;<br/></div><div>    &lt;/bean &gt;<br/></div><div><br/></div><div>    &lt;!-- (事务管理)transaction manager, use JtaTransactionManager for global tx --&gt;<br/></div><div>    &lt;bean id = &quot;transactionManager&quot;<br/></div><div>        class= &quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot; &gt;<br/></div><div>        &lt;property name = &quot;dataSource&quot; ref= &quot;dataSource&quot; /&gt;<br/></div><div>    &lt;/bean &gt;<br/></div><div><br/></div><div>&lt;/ beans&gt;</div></div><div><br/></div><div><span style="font-size: 19px;">1.6 下面开始进行测试。</span></div><div><span style="font-size: 19px;">1.6.1。首先建表</span></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>-- ----------------------------</div><div>-- Table structure for `user_t`</div><div>-- ----------------------------</div><div>DROP TABLE IF EXISTS `user_t`;</div><div>CREATE TABLE `user_t` (</div><div>  `id` INT(11) NOT NULL AUTO_INCREMENT,</div><div>  `user_name` VARCHAR(40) NOT NULL,</div><div>  `password` VARCHAR(255) NOT NULL,</div><div>  `age` INT(4) NOT NULL,</div><div>  PRIMARY KEY (`id`)</div><div>) ENGINE=INNODB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8;</div><div><br/></div><div>-- ----------------------------</div><div>-- Records of user_t</div><div>-- ----------------------------</div><div>INSERT INTO `user_t` VALUES ('1', '测试', '345', '24');</div><div>INSERT INTO `user_t` VALUES ('2', 'javen', '123', '10');</div></div><div><br/></div><div><span style="font-size: 19px;">1.6.2 可以运用逆向工程进行创建实体类，MyBatis映射文件和Dao接口。</span></div><div>          这边也提供上这些文件</div><div>User.java</div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>package com.javen.model;</div><div><br/></div><div>public class User {</div><div><br/></div><div>       private Integer id;</div><div><br/></div><div>       private String userName;</div><div><br/></div><div>       private String password;</div><div><br/></div><div>       private Integer age;</div><div><br/></div><div>       public Integer getId() {</div><div>             return id;</div><div>      }</div><div><br/></div><div>       public void setId(Integer id) {</div><div>             this. id = id;</div><div>      }</div><div><br/></div><div>       public String getUserName() {</div><div>             return userName;</div><div>      }</div><div><br/></div><div>       public void setUserName(String userName) {</div><div>             this. userName = userName;</div><div>      }</div><div><br/></div><div>       public String getPassword() {</div><div>             return password;</div><div>      }</div><div><br/></div><div>       public void setPassword(String password) {</div><div>             this. password = password;</div><div>      }</div><div><br/></div><div>       public Integer getAge() {</div><div>             return age;</div><div>      }</div><div><br/></div><div>       public void setAge(Integer age) {</div><div>             this. age = age;</div><div>      }</div><div><br/></div><div>       public User(Integer id, String userName, String password, Integer age) {</div><div>             super();</div><div>             this. id = id;</div><div>             this. userName = userName;</div><div>             this. password = password;</div><div>             this. age = age;</div><div>      }</div><div><br/></div><div>       public User() {</div><div>             // TODO Auto-generated constructor stub</div><div>      }</div><div><br/></div><div>       @Override</div><div>       public String toString() {</div><div>             return &quot;User [id=&quot; + id + &quot;, userName=&quot; + userName + &quot;, password=&quot; + password + &quot;, age=&quot; + age + &quot;]&quot;;</div><div>      }</div><div><br/></div><div>}</div></div><div><br/></div><div>IuserDao.java（注意，习惯在接口前使用 I ）</div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>package com.javen.dao;</div><div><br/></div><div>import java.util.List;</div><div><br/></div><div>import com.javen.model.User;</div><div><br/></div><div>public interface IUserDao {</div><div><br/></div><div>       int deleteByPrimaryKey(Integer id);</div><div><br/></div><div>       int insert(User record);</div><div><br/></div><div>       int insertSelective(User record);</div><div><br/></div><div>      User selectByPrimaryKey(Integer id);</div><div><br/></div><div>       int updateByPrimaryKeySelective(User record);</div><div><br/></div><div>       int updateByPrimaryKey(User record);</div><div><br/></div><div>      List&lt;User&gt; getAllUser();</div><div>}</div></div><div><br/></div><div>UserMapping.xml</div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>&lt;? xml version= &quot;1.0&quot; encoding= &quot;UTF-8&quot; ?&gt;</div><div>&lt;! DOCTYPE mapper PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot; &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot; &gt;</div><div>&lt; mapper namespace= &quot;com.javen.dao.IUserDao&quot; &gt;</div><div>  &lt; resultMap id= &quot;BaseResultMap&quot; type = &quot;com.javen.model.User&quot; &gt;</div><div>    &lt;id column = &quot;id&quot; property= &quot;id&quot; jdbcType= &quot;INTEGER&quot; /&gt;</div><div>    &lt;result column = &quot;user_name&quot; property= &quot;userName&quot; jdbcType= &quot;VARCHAR&quot; /&gt;</div><div>    &lt;result column = &quot;password&quot; property= &quot;password&quot; jdbcType= &quot;VARCHAR&quot; /&gt;</div><div>    &lt;result column = &quot;age&quot; property= &quot;age&quot; jdbcType= &quot;INTEGER&quot; /&gt;</div><div>  &lt;/ resultMap&gt;</div><div>  &lt; sql id= &quot;Base_Column_List&quot; &gt;</div><div>    id, user_name, password, age</div><div>  &lt;/ sql&gt;</div><div>  &lt; select id= &quot;selectByPrimaryKey&quot; resultMap = &quot;BaseResultMap&quot; parameterType =&quot;java.lang.Integer&quot; &gt;</div><div>    select</div><div>    &lt;include refid = &quot;Base_Column_List&quot; /&gt;</div><div>    from user_t</div><div>    where id = #{id,jdbcType=INTEGER}</div><div>  &lt;/ select&gt;</div><div>  &lt; delete id= &quot;deleteByPrimaryKey&quot; parameterType = &quot;java.lang.Integer&quot; &gt;</div><div>    delete from user_t</div><div>    where id = #{id,jdbcType=INTEGER}</div><div>  &lt;/ delete&gt;</div><div>  &lt; insert id= &quot;insert&quot; parameterType = &quot;com.javen.model.User&quot; &gt;</div><div>    insert into user_t (id, user_name, password,</div><div>      age)</div><div>    values (#{id,jdbcType=INTEGER}, #{userName,jdbcType=VARCHAR}, #{password,jdbcType=VARCHAR},</div><div>      #{age,jdbcType=INTEGER})</div><div>  &lt;/ insert&gt;</div><div>  &lt; insert id= &quot;insertSelective&quot; parameterType = &quot;com.javen.model.User&quot; &gt;</div><div>    insert into user_t</div><div>    &lt;trim prefix = &quot;(&quot; suffix= &quot;)&quot; suffixOverrides= &quot;,&quot; &gt;</div><div>      &lt;if test = &quot;id != null&quot; &gt;</div><div>        id,</div><div>      &lt;/if &gt;</div><div>      &lt;if test = &quot;userName != null&quot; &gt;</div><div>        user_name,</div><div>      &lt;/if &gt;</div><div>      &lt;if test = &quot;password != null&quot; &gt;</div><div>        password,</div><div>      &lt;/if &gt;</div><div>      &lt;if test = &quot;age != null&quot; &gt;</div><div>        age,</div><div>      &lt;/if &gt;</div><div>    &lt;/trim &gt;</div><div>    &lt;trim prefix = &quot;values (&quot; suffix= &quot;)&quot; suffixOverrides= &quot;,&quot; &gt;</div><div>      &lt;if test = &quot;id != null&quot; &gt;</div><div>        #{id,jdbcType=INTEGER},</div><div>      &lt;/if &gt;</div><div>      &lt;if test = &quot;userName != null&quot; &gt;</div><div>        #{userName,jdbcType=VARCHAR},</div><div>      &lt;/if &gt;</div><div>      &lt;if test = &quot;password != null&quot; &gt;</div><div>        #{password,jdbcType=VARCHAR},</div><div>      &lt;/if &gt;</div><div>      &lt;if test = &quot;age != null&quot; &gt;</div><div>        #{age,jdbcType=INTEGER},</div><div>      &lt;/if &gt;</div><div>    &lt;/trim &gt;</div><div>  &lt;/ insert&gt;</div><div>  &lt; update id= &quot;updateByPrimaryKeySelective&quot; parameterType =&quot;com.javen.model.User&quot; &gt;</div><div>    update user_t</div><div>    &lt;set &gt;</div><div>      &lt;if test = &quot;userName != null&quot; &gt;</div><div>        user_name = #{userName,jdbcType=VARCHAR},</div><div>      &lt;/if &gt;</div><div>      &lt;if test = &quot;password != null&quot; &gt;</div><div>        password = #{password,jdbcType=VARCHAR},</div><div>      &lt;/if &gt;</div><div>      &lt;if test = &quot;age != null&quot; &gt;</div><div>        age = #{age,jdbcType=INTEGER},</div><div>      &lt;/if &gt;</div><div>    &lt;/set &gt;</div><div>    where id = #{id,jdbcType=INTEGER}</div><div>  &lt;/ update&gt;</div><div>  &lt; update id= &quot;updateByPrimaryKey&quot; parameterType = &quot;com.javen.model.User&quot; &gt;<br/></div><div>    update user_t</div><div>    set user_name = #{userName,jdbcType=VARCHAR},</div><div>      password = #{password,jdbcType=VARCHAR},</div><div>      age = #{age,jdbcType=INTEGER}</div><div>    where id = #{id,jdbcType=INTEGER}</div><div>  &lt;/ update&gt;</div><div><br/></div><div><br/></div><div>&lt;/ mapper&gt;</div></div><div><br/></div><div>IUserService.java</div><div style="box-sizing: border-box; padding: 8px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.148438);"><div><font color="#333333" face="Monaco, Menlo, Consolas, Courier New, monospace" size="2"><span style="line-height: 18px;">package com.javen.service;</span></font></div><div><font color="#333333" face="Monaco, Menlo, Consolas, Courier New, monospace" size="2"><span style="line-height: 18px;"><br/></span></font></div><div><font color="#333333" face="Monaco, Menlo, Consolas, Courier New, monospace" size="2"><span style="line-height: 18px;">import java.util.List;</span></font></div><div><font color="#333333" face="Monaco, Menlo, Consolas, Courier New, monospace" size="2"><span style="line-height: 18px;"><br/></span></font></div><div><font color="#333333" face="Monaco, Menlo, Consolas, Courier New, monospace" size="2"><span style="line-height: 18px;">import com.javen.model.User;</span></font></div><div><font color="#333333" face="Monaco, Menlo, Consolas, Courier New, monospace" size="2"><span style="line-height: 18px;"><br/></span></font></div><div><font color="#333333" face="Monaco, Menlo, Consolas, Courier New, monospace" size="2"><span style="line-height: 18px;">public interface IUserService {</span></font></div><div><font color="#333333" face="Monaco, Menlo, Consolas, Courier New, monospace" size="2"><span style="line-height: 18px;"><br/></span></font></div><div><font color="#333333" face="Monaco, Menlo, Consolas, Courier New, monospace" size="2"><span><span>      </span>public User getUserById(int userId);</span></font></div><div><font color="#333333" face="Monaco, Menlo, Consolas, Courier New, monospace" size="2"><span style="line-height: 18px;">}</span></font></div></div><div><br/></div><div>UserServiceImpl.java</div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>package com.javen.service.impl;</div><div><br/></div><div>import java.util.List;</div><div><br/></div><div>import javax.annotation.Resource;</div><div><br/></div><div>import org.springframework.stereotype.Service;</div><div><br/></div><div>import com.javen.dao.IUserDao;</div><div>import com.javen.model.User;</div><div>import com.javen.service.IUserService;</div><div><br/></div><div>@Service( &quot;userService&quot;)</div><div>public class UserServiceImpl implements IUserService {</div><div><br/></div><div>       @Resource</div><div>       private IUserDao userDao;</div><div><br/></div><div><br/></div><div>       public User getUserById( int userId) {</div><div>             // TODO Auto-generated method stub</div><div>             return this. userDao.selectByPrimaryKey( userId);</div><div>      }</div><div><br/></div><div>}</div></div><div><br/></div><div><span style="font-size: 19px;">1.6.3 建立测试类</span></div><div>           测试类在src/test/java中建立，下面测试类中注释掉的部分是不使用Spring时，一般情况下的一种测试方法；如果使用了Spring那么就可以使用注解的方式来引入配置文件和类，然后再将service接口对象注入，就可以进行测试了。</div><div>       如果测试成功，表示Spring和Mybatis已经整合成功了。输出信息使用的是Log4j打印到控制台。</div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>package ssm_level2;</div><div><br/></div><div>import javax.annotation.Resource;</div><div><br/></div><div>import org.apache.log4j.Logger;</div><div>import org.junit.Test;</div><div>import org.junit.runner.RunWith;</div><div>import org.springframework.test.context.ContextConfiguration;</div><div>import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;</div><div><br/></div><div>import com.alibaba.fastjson.JSON;</div><div>import com.javen.model.User;</div><div>import com.javen.service.IUserService;</div><div><br/></div><div>@RunWith(SpringJUnit4ClassRunner. class) // 表示继承了SpringJUnit4ClassRunner类</div><div>@ContextConfiguration (locations = { &quot;classpath:spring-mybatis.xml&quot; })</div><div><br/></div><div>public class TestMyBatis {</div><div>       private static Logger logger = Logger.getLogger(TestMyBatis. class);</div><div>       // private ApplicationContext ac = null;</div><div>       @Resource</div><div>       private IUserService userService = null;</div><div><br/></div><div>       // @Before</div><div>       // public void before() {</div><div>       // ac = new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;);</div><div>       // userService = (IUserService) ac.getBean(&quot;userService&quot;);</div><div>       // }</div><div><br/></div><div>       @Test</div><div>       public void test1() {</div><div>            User user = userService.getUserById(1);</div><div>             // System.out.println(user.getUserName());</div><div>             // logger.info(&quot;值：&quot;+user.getUserName());</div><div>             logger.info(JSON. toJSONString( user));</div><div>      }</div><div>}</div></div><div><br/></div><div>如果JUnit刷绿，控制台打印出一下内容，说明测试成功。</div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div><img src="ssm_level2_files/Image.png" type="image/png" style="height: auto;"/></div></div><div><br/></div><div><br/></div><div><span style="font-size: 19px;">1.6.4 建立UserContrpller类</span></div><div>UserController.java</div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>package com.javen.controller;</div><div><br/></div><div>import java.io.File;</div><div>import java.io.IOException;</div><div>import java.util.List;</div><div>import java.util.Map;</div><div><br/></div><div>import javax.annotation.Resource;</div><div>import javax.servlet.http.HttpServletRequest;</div><div><br/></div><div>import org.apache.commons.io.FileUtils;</div><div>import org.slf4j.Logger;</div><div>import org.slf4j.LoggerFactory;</div><div>import org.springframework.http.HttpStatus;</div><div>import org.springframework.http.ResponseEntity;</div><div>import org.springframework.stereotype.Controller;</div><div>import org.springframework.ui.Model;</div><div>import org.springframework.web.bind.annotation.PathVariable;</div><div>import org.springframework.web.bind.annotation.RequestMapping;</div><div>import org.springframework.web.bind.annotation.RequestMethod;</div><div>import org.springframework.web.bind.annotation.RequestParam;</div><div>import org.springframework.web.bind.annotation.ResponseBody;</div><div>import org.springframework.web.multipart.MultipartFile;</div><div><br/></div><div>import com.javen.model.User;</div><div>import com.javen.service.IUserService;</div><div><br/></div><div>@Controller</div><div>@RequestMapping(&quot;/user&quot;)</div><div>// /user/**</div><div>public class UserController {</div><div>    private static Logger log = LoggerFactory.getLogger(UserController.class);</div><div>    @Resource</div><div>    private IUserService userService;</div><div><br/></div><div>    // /user/test?id=1</div><div>    @RequestMapping(value = &quot;/test&quot;, method = RequestMethod.GET)</div><div>    public String test(HttpServletRequest request, Model model) {</div><div>        int userId = Integer.parseInt(request.getParameter(&quot;id&quot;));</div><div>        System.out.println(&quot;userId:&quot; + userId);</div><div>        User user = null;</div><div>        if (userId == 1) {</div><div>            user = new User();</div><div>            user.setAge(11);</div><div>            user.setId(1);</div><div>            user.setPassword(&quot;123&quot;);</div><div>            user.setUserName(&quot;javen&quot;);</div><div>        }</div><div>        System.out.println(user.toString());</div><div>        log.debug(user.toString());</div><div>        model.addAttribute(&quot;user&quot;, user);</div><div>        return &quot;index&quot;;</div><div>    }</div><div><br/></div><div>    // /user/showUser?id=1</div><div>    @RequestMapping(value = &quot;/showUser&quot;, method = RequestMethod.GET)</div><div>    public String toIndex(HttpServletRequest request, Model model) {</div><div>        int userId = Integer.parseInt(request.getParameter(&quot;id&quot;));</div><div>        System.out.println(&quot;userId:&quot; + userId);</div><div>        User user = this.userService.getUserById(userId);</div><div>        log.debug(user.toString());</div><div>        model.addAttribute(&quot;user&quot;, user);</div><div>        return &quot;showUser&quot;;</div><div>    }</div><div><br/></div><div>    // /user/showUser2?id=1</div><div>    @RequestMapping(value = &quot;/showUser2&quot;, method = RequestMethod.GET)</div><div>    public String toIndex2(@RequestParam(&quot;id&quot;) String id, Model model) {</div><div>        int userId = Integer.parseInt(id);</div><div>        System.out.println(&quot;userId:&quot; + userId);</div><div>        User user = this.userService.getUserById(userId);</div><div>        log.debug(user.toString());</div><div>        model.addAttribute(&quot;user&quot;, user);</div><div>        return &quot;showUser&quot;;</div><div>    }</div><div><br/></div><div>    // /user/showUser3/{id}</div><div>    @RequestMapping(value = &quot;/showUser3/{id}&quot;, method = RequestMethod.GET)</div><div>    public String toIndex3(@PathVariable(&quot;id&quot;) String id, Map&lt;String, Object&gt; model) {</div><div>        int userId = Integer.parseInt(id);</div><div>        System.out.println(&quot;userId:&quot; + userId);</div><div>        User user = this.userService.getUserById(userId);</div><div>        log.debug(user.toString());</div><div>        model.put(&quot;user&quot;, user);</div><div>        System.out.println(user.toString());</div><div>        return &quot;showUser&quot;;</div><div>    }</div><div><br/></div><div>    // /user/{id}</div><div>    @RequestMapping(value = &quot;/{id}&quot;, method = RequestMethod.GET)</div><div>    public @ResponseBody User getUserInJson(@PathVariable String id, Map&lt;String, Object&gt; model) {</div><div>        int userId = Integer.parseInt(id);</div><div>        System.out.println(&quot;userId:&quot; + userId);</div><div>        User user = this.userService.getUserById(userId);</div><div>        log.info(user.toString());</div><div>        return user;</div><div>    }</div><div><br/></div><div>    // /user/{id}</div><div>    @RequestMapping(value = &quot;/jsontype/{id}&quot;, method = RequestMethod.GET)</div><div>    public ResponseEntity&lt;User&gt; getUserInJson2(@PathVariable String id, Map&lt;String, Object&gt; model) {</div><div>        int userId = Integer.parseInt(id);</div><div>        System.out.println(&quot;userId:&quot; + userId);</div><div>        User user = this.userService.getUserById(userId);</div><div>        log.info(user.toString());</div><div>        return new ResponseEntity&lt;User&gt;(user, HttpStatus.OK);</div><div>    }</div><div><br/></div><div>    // 文件上传、</div><div>    @RequestMapping(value = &quot;/upload&quot;)</div><div>    public String showUploadPage() {</div><div>        return &quot;user_admin/file&quot;;</div><div>    }</div><div><br/></div><div>    @RequestMapping(value = &quot;/doUpload&quot;, method = RequestMethod.POST)</div><div>    public String doUploadFile(@RequestParam(&quot;file&quot;) MultipartFile file) throws IOException {</div><div>        if (!file.isEmpty()) {</div><div>            log.info(&quot;Process file:{}&quot;, file.getOriginalFilename());</div><div>        }</div><div>        FileUtils.copyInputStreamToFile(file.getInputStream(),</div><div>                new File(&quot;E:\\&quot;, System.currentTimeMillis() + file.getOriginalFilename()));</div><div>        return &quot;succes&quot;;</div><div>    }</div><div><br/></div><div>    @RequestMapping(value = &quot;/hello&quot;, method = RequestMethod.GET)</div><div>    public String Hello() {</div><div>        log.debug(&quot;程序已经运行了&quot;);</div><div>        return &quot;succes&quot;;</div><div>    }</div><div><br/></div><div>}</div></div><div><br/></div><div><br/></div><div><span style="font-size: 19px;">1.6.5 建立JSP页面</span></div><div>     index.jsp</div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>&lt;%@ page language = &quot;java&quot; contentType= &quot;text/html; charset=utf-8&quot;</div><div>    pageEncoding= &quot;utf-8&quot;%&gt;</div><div>&lt;! DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot; &gt;</div><div>&lt; html&gt;</div><div>&lt; head&gt;</div><div>&lt; meta http-equiv= &quot;Content-Type&quot; content = &quot;text/html; charset=utf-8&quot;&gt;</div><div>&lt; title&gt; SSM DEMO&lt;/ title&gt;</div><div>&lt;/ head&gt;</div><div>&lt; body&gt;</div><div>       &lt;!-- 测试整体 --&gt;</div><div>       &lt;a href= &quot;${pageContext.request.contextPath} /user/hello&quot; &gt;HelloWorld!!! &lt;/a &gt;</div><div>       &lt;br /&gt;</div><div>       &lt;br /&gt;</div><div>       &lt;a href = &quot;${pageContext.request.contextPath} /user/upload&quot;&gt; 试试上传完文件 &lt;/a &gt;</div><div>       &lt;br /&gt;</div><div>       &lt;br /&gt;</div><div>       &lt;!-- 演示PathParam --&gt;</div><div>       &lt;a href = &quot;${pageContext.request.contextPath} /user/showUser2?id=1&quot;&gt; TestPathParam &lt;/ a&gt;</div><div>       &lt;br /&gt;</div><div>       &lt;br /&gt;</div><div>       &lt;!-- 演示PathVariable --&gt;</div><div>       &lt;a href = &quot;${pageContext.request.contextPath} /user/showUser3/1&quot;&gt; TestPathVariable &lt;/ a&gt;</div><div>       &lt;br /&gt;</div><div>       &lt;br /&gt;</div><div>       &lt;a href = &quot;${pageContext.request.contextPath} /user/test?id=1&quot;&gt; Test &lt;/ a&gt;</div><div>       &lt;br /&gt;</div><div>       &lt;br /&gt;</div><div><br/></div><div>&lt;/ body&gt;</div><div>&lt;/ html&gt;</div></div><div><br/></div><div>因为我们在1.3.1 中的 spring-mybatis 中设置了：这里的配置我的理解是自动给后面action的方法return的字符串加上前缀和后缀，变成一个 可用的url地址。所以我们应该在WEB-INF下新建一个 jsp 页面。在jsp文件夹下新建相关jsp页面</div><div>index.jsp</div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>&lt; html&gt;</div><div>&lt; body&gt;</div><div>&lt; h2&gt; Hello World!&lt;/ h2&gt;</div><div>&lt;/ body&gt;</div><div>&lt;/ html&gt;</div></div><div><br/></div><div>showUser.jsp</div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>&lt;%@ page language = &quot;java&quot; import= &quot;java.util.*&quot; pageEncoding= &quot;utf-8&quot; %&gt;<br/></div><div>&lt;! DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;&gt;<br/><br/></div><div>&lt; html&gt;</div><div>  &lt; head&gt;</div><div>    &lt;title &gt;测试 &lt;/title &gt;</div><div>  &lt;/ head&gt;</div><div><br/></div><div>  &lt; body&gt;</div><div>    ${user.userName}</div><div>  &lt;/ body&gt;<br/><br/></div><div>&lt;/ html&gt;<br/><br/></div></div><div><br/></div><div>succes.jsp</div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>&lt; html&gt;</div><div>&lt; body&gt;</div><div>&lt; h2&gt; Hello World!&lt;/ h2&gt;</div><div>&lt;/ body&gt;</div><div>&lt;/ html&gt;</div></div><div><br/></div><div> </div><div>整个项目的结构图：</div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div><img src="ssm_level2_files/Image [1].png" type="image/png"/></div></div><div><br/></div><div><br/></div><div>先写了这几个简单的页面。后期再完善吧。。</div><div><a href="ssm_level2_files/ssm_level2.zip"><img src="ssm_level2_files/6eb63dd03d3632971d9c1c47b8840c04.png" alt="ssm_level2.zip"></a><br/></div><div><br/></div><div><br/></div></span>
</div></body></html> 